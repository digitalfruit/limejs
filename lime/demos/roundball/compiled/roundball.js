var h=void 0,l=!0,m=null,n=!1;function aa(a){return function(){return this[a]}}var q,r=this;function ba(){}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function t(a){return a!==h}function u(a){return"array"==ca(a)}function v(a){return"string"==typeof a}function da(a){return"number"==typeof a}function ea(a){return"function"==ca(a)}function fa(a){var b=typeof a;return"object"==b&&a!=m||"function"==b}function ga(a){return a[ha]||(a[ha]=++ia)}var ha="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ia=0;function ja(a,b,c){return a.call.apply(a.bind,arguments)}
function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function la(a,b,c){la=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return la.apply(m,arguments)}
function ma(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var na=Date.now||function(){return+new Date};function w(a,b){function c(){}c.prototype=b.prototype;a.vd=b.prototype;a.prototype=new c};var oa={},pa,qa,ra;function sa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ta(a){if(!ua.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(va,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(wa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(xa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ya,"&quot;"));return a}var va=/&/g,wa=/</g,xa=/>/g,ya=/\"/g,ua=/[&<>\"]/;var x=Array.prototype,za=x.indexOf?function(a,b,c){return x.indexOf.call(a,b,c)}:function(a,b,c){c=c==m?0:0>c?Math.max(0,a.length+c):c;if(v(a))return!v(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Aa=x.forEach?function(a,b,c){x.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ba=x.filter?function(a,b,c){return x.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=v(a)?
a.split(""):a,j=0;j<d;j++)if(j in g){var k=g[j];b.call(c,k,j,a)&&(e[f++]=k)}return e},Ca=x.map?function(a,b,c){return x.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=v(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};function Da(a,b){0<=za(a,b)||a.push(b)}function Ea(a,b){var c=za(a,b);0<=c&&x.splice.call(a,c,1)}function Fa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ga(a,b,c,d){return x.splice.apply(a,Ha(arguments,1))}function Ha(a,b,c){return 2>=arguments.length?x.slice.call(a,b):x.slice.call(a,b,c)};function y(a,b){this.x=t(a)?a:0;this.y=t(b)?b:0}y.prototype.d=function(){return new y(this.x,this.y)};function Ia(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Ia.prototype.d=function(){return new Ia(this.top,this.right,this.bottom,this.left)};Ia.prototype.contains=function(a){return!this||!a?n:a instanceof Ia?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};
Ia.prototype.expand=function(a,b,c,d){fa(a)?(this.top-=a.top,this.right+=a.right,this.bottom+=a.bottom,this.left-=a.left):(this.top-=a,this.right+=b,this.bottom+=c,this.left-=d);return this};function z(a,b){this.width=a;this.height=b}q=z.prototype;q.d=function(){return new z(this.width,this.height)};function Ja(a){return a.width*a.height}q.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};q.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};q.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
q.scale=function(a){this.width*=a;this.height*=a;return this};Ia.prototype.size=function(){return new z(this.right-this.left,this.bottom-this.top)};function Ka(){}Ka.prototype.z=ba;function B(a){return a.Kc?a.Kc:a}function La(a,b){Ma(b,a);b.Kc=B(a);return b};var C=new Ka;C.Ea=function(){};
C.Bd=function(){var a=this.Ka,b=this.Gb(),c=this.da||1,d=c/a,e;if(this.a){this.tb&&this.tb.contains(b)&&(e=Ja(this.tb.size())/Ja(b.size()))&&1.6>e&&0.5<e?b=this.tb:1!=this.te&&0!=this.e.length&&(this instanceof D||b.expand(12,12,12,12));this.tb=b;var f=b.size();e=f.d().scale(c).ceil();if(this.a.width!=e.width||this.a.height!=e.height)this.a.width=e.width,this.a.height=e.height,this.Jb=1;var g=this.u.d();this.l[E]&&(g=this.l[E]);0!=e.width?g.scale(f.width*d/e.width):g.scale(1/a);a=F(this);this.Vb=
(a.left-b.left)*c;this.Wb=(a.top-b.top)*c;b=this.f().d();a=this.ca;b.width*=a.x;b.height*=a.y;b=b.scale(c);c=this.h.d();this.l[G]&&(c=this.l[G]);c.x*=d;c.y*=d;c.x-=b.width+this.Vb;c.y-=b.height+this.Wb;Na(this.a,100*((this.Vb+b.width)/e.width),100*((this.Wb+b.height)/e.height),l);!this.W[G]&&(!this.W[E]&&!this.W[Oa])&&(d=-(this.I%=360),t(this.l[Oa])&&(d=-this.l[Oa]),Pa(this.a,Qa(new Ra,0.1).translate(c.x,c.y).scale(g.x,g.y).rotate(d)));this.Jb&&(d=this.a.getContext("2d"),c=this.da||1,d.clearRect(0,
0,e.width,e.height),d.save(),d.translate(this.Vb,this.Wb),d.scale(c,c),e=this.f(),g=this.ca,d.translate(e.width*g.x,e.height*g.y),this.n.Xc.call(this,d),d.restore(),this.Jb=0)}};C.update=function(){};
C.Xc=function(a){if(this.q&&(this.j!=this.ja&&(this.ja&&H.qd.call(this),this.j&&H.Ec.call(this)),!this.Aa&&!this.Ab&&!(0==this.C||1==this.ic))){1!=this.C&&(a.globalAlpha*=this.C);if(this.j){H.Nc.call(this.j);var b=this.ja,c=this.u;a.save();a.save();a.translate(b.gd.x,b.gd.y);a.rotate(-b.hd);this.kb&&a.rotate((this.I%=360)*Math.PI/180);a.beginPath();a.moveTo(0,0);a.lineTo(b.mc/c.x,0);a.lineTo(b.mc/c.x,b.lc/c.y);a.lineTo(0,b.lc/c.y);a.closePath();a.restore();a.clip()}b=new y(0,0);this.n.z.call(this,
a);for(var d=0,e;e=this.e[d];d++){var f=Sa(e,b).d(),g=e.I%=360,c=e.u;a.save();a.translate(f.x,f.y);a.scale(c.x,c.y);0!=g&&a.rotate(-g*Math.PI/180);this.n.Xc.call(e,a);a.restore()}1!=this.C&&(a.globalAlpha/=this.C);this.ja&&a.restore()}};function I(a,b){this.x=a;this.y=b}w(I,y);I.prototype.d=function(){return new I(this.x,this.y)};I.prototype.scale=function(a){this.x*=a;this.y*=a;return this};I.prototype.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};var Ta,Ua,Va,Wa,Xa,Za;function $a(){return r.navigator?r.navigator.userAgent:m}Xa=Wa=Va=Ua=Ta=n;var ab;if(ab=$a()){var bb=r.navigator;Ta=0==ab.indexOf("Opera");Ua=!Ta&&-1!=ab.indexOf("MSIE");Wa=(Va=!Ta&&-1!=ab.indexOf("WebKit"))&&-1!=ab.indexOf("Mobile");Xa=!Ta&&!Va&&"Gecko"==bb.product}var cb=Ta,J=Ua,L=Xa,M=Va,db=Wa,eb,fb=r.navigator;eb=fb&&fb.platform||"";Za=-1!=eb.indexOf("Mac");var gb=-1!=eb.indexOf("Win"),hb;
a:{var ib="",jb;if(cb&&r.opera)var kb=r.opera.version,ib="function"==typeof kb?kb():kb;else if(L?jb=/rv\:([^\);]+)(\)|;)/:J?jb=/MSIE\s+([^\);]+)(\)|;)/:M&&(jb=/WebKit\/(\S+)/),jb)var lb=jb.exec($a()),ib=lb?lb[1]:"";if(J){var mb,nb=r.document;mb=nb?nb.documentMode:h;if(mb>parseFloat(ib)){hb=String(mb);break a}}hb=ib}var ob={};
function N(a){var b;if(!(b=ob[a])){b=0;for(var c=sa(String(hb)).split("."),d=sa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",j=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),p=RegExp("(\\d*)(\\D*)","g");do{var s=k.exec(g)||["","",""],A=p.exec(j)||["","",""];if(0==s[0].length&&0==A[0].length)break;b=((0==s[1].length?0:parseInt(s[1],10))<(0==A[1].length?0:parseInt(A[1],10))?-1:(0==s[1].length?0:parseInt(s[1],10))>(0==A[1].length?0:parseInt(A[1],10))?1:0)||((0==s[2].length)<
(0==A[2].length)?-1:(0==s[2].length)>(0==A[2].length)?1:0)||(s[2]<A[2]?-1:s[2]>A[2]?1:0)}while(0==b)}b=ob[a]=0<=b}return b}var pb={};function qb(a){return pb[a]||(pb[a]=J&&!!document.documentMode&&document.documentMode>=a)};function sb(){}var tb=0;q=sb.prototype;q.key=0;q.La=n;q.Xb=n;q.Bb=function(a,b,c,d,e,f){if(ea(a))this.dd=l;else if(a&&a.handleEvent&&ea(a.handleEvent))this.dd=n;else throw Error("Invalid listener argument");this.hb=a;this.pd=b;this.src=c;this.type=d;this.capture=!!e;this.ec=f;this.Xb=n;this.key=++tb;this.La=n};q.handleEvent=function(a){return this.dd?this.hb.call(this.ec||this.src,a):this.hb.handleEvent.call(this.hb,a)};function ub(a,b){for(var c in a)b.call(h,a[c],c,a)}var vb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ma(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<vb.length;f++)c=vb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};!J||qb(9);var wb=!J||qb(9),xb=J&&!N("8");!M||N("528");L&&N("1.9b")||J&&N("8")||cb&&N("9.5")||M&&N("528");L&&!N("8")||J&&N("9");function yb(){};function zb(a,b){this.type=a;this.currentTarget=this.target=b}q=zb.prototype;q.ma=n;q.defaultPrevented=n;q.Lb=l;q.stopPropagation=function(){this.ma=l};q.preventDefault=function(){this.defaultPrevented=l;this.Lb=n};function Ab(a){Ab[" "](a);return a}Ab[" "]=ba;function Bb(a,b){a&&this.Bb(a,b)}w(Bb,zb);q=Bb.prototype;q.target=m;q.relatedTarget=m;q.offsetX=0;q.offsetY=0;q.clientX=0;q.clientY=0;q.screenX=0;q.screenY=0;q.button=0;q.keyCode=0;q.charCode=0;q.ctrlKey=n;q.altKey=n;q.shiftKey=n;q.metaKey=n;q.Vd=n;q.wa=m;
q.Bb=function(a,b){var c=this.type=a.type;zb.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(L){var e;a:{try{Ab(d.nodeName);e=l;break a}catch(f){}e=n}e||(d=m)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=M||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=M||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=a.screenX||
0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Vd=Za?a.metaKey:a.ctrlKey;this.state=a.state;this.wa=a;a.defaultPrevented&&this.preventDefault();delete this.ma};q.stopPropagation=function(){Bb.vd.stopPropagation.call(this);this.wa.stopPropagation?this.wa.stopPropagation():this.wa.cancelBubble=l};
q.preventDefault=function(){Bb.vd.preventDefault.call(this);var a=this.wa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=n,xb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Cb={},O={},Db={},Eb={};
function P(a,b,c,d,e){if(b){if(u(b)){for(var f=0;f<b.length;f++)P(a,b[f],c,d,e);return m}var d=!!d,g=O;b in g||(g[b]={Y:0,U:0});g=g[b];d in g||(g[d]={Y:0,U:0},g.Y++);var g=g[d],j=ga(a),k;g.U++;if(g[j]){k=g[j];for(f=0;f<k.length;f++)if(g=k[f],g.hb==c&&g.ec==e){if(g.La)break;return k[f].key}}else k=g[j]=[],g.Y++;var p=Fb,s=wb?function(a){return p.call(s.src,s.key,a)}:function(a){a=p.call(s.src,s.key,a);if(!a)return a},f=s;f.src=a;g=new sb;g.Bb(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);Cb[c]=g;Db[j]||(Db[j]=
[]);Db[j].push(g);a.addEventListener?(a==r||!a.Zb)&&a.addEventListener(b,f,d):a.attachEvent(b in Eb?Eb[b]:Eb[b]="on"+b,f);return c}throw Error("Invalid event type");}function Gb(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)Gb(a,b[f],c,d,e);else a=P(a,b,c,d,e),Cb[a].Xb=l}
function Hb(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)Hb(a,b[f],c,d,e);else{d=!!d;a:{f=O;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ga(a),f[a]))){a=f[a];break a}a=m}if(a)for(f=0;f<a.length;f++)if(a[f].hb==c&&a[f].capture==d&&a[f].ec==e){Ib(a[f].key);break}}}
function Ib(a){if(Cb[a]){var b=Cb[a];if(!b.La){var c=b.src,d=b.type,e=b.pd,f=b.capture;c.removeEventListener?(c==r||!c.Zb)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Eb?Eb[d]:Eb[d]="on"+d,e);c=ga(c);Db[c]&&(e=Db[c],Ea(e,b),0==e.length&&delete Db[c]);b.La=l;if(b=O[d][f][c])b.ld=l,Jb(d,f,c,b);delete Cb[a]}}}
function Jb(a,b,c,d){if(!d.Eb&&d.ld){for(var e=0,f=0;e<d.length;e++)d[e].La?d[e].pd.src=m:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.ld=n;0==f&&(delete O[a][b][c],O[a][b].Y--,0==O[a][b].Y&&(delete O[a][b],O[a].Y--),0==O[a].Y&&delete O[a])}}function Kb(a,b,c,d,e){var f=1,b=ga(b);if(a[b]){a.U--;a=a[b];a.Eb?a.Eb++:a.Eb=1;try{for(var g=a.length,j=0;j<g;j++){var k=a[j];k&&!k.La&&(f&=Lb(k,e)!==n)}}finally{a.Eb--,Jb(c,d,b,a)}}return Boolean(f)}function Lb(a,b){a.Xb&&Ib(a.key);return a.handleEvent(b)}
function Fb(a,b){if(!Cb[a])return l;var c=Cb[a],d=c.type,e=O;if(!(d in e))return l;var e=e[d],f,g;if(!wb){var j;if(!(j=b))a:{j=["window","event"];for(var k=r;f=j.shift();)if(k[f]!=m)k=k[f];else{j=m;break a}j=k}f=j;j=l in e;k=n in e;if(j){if(0>f.keyCode||f.returnValue!=h)return l;a:{var p=n;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(s){p=l}if(p||f.returnValue==h)f.returnValue=l}}p=new Bb;p.Bb(f,this);f=l;try{if(j){for(var A=[],Y=p.currentTarget;Y;Y=Y.parentNode)A.push(Y);g=e[l];g.U=g.Y;for(var K=
A.length-1;!p.ma&&0<=K&&g.U;K--)p.currentTarget=A[K],f&=Kb(g,A[K],d,l,p);if(k){g=e[n];g.U=g.Y;for(K=0;!p.ma&&K<A.length&&g.U;K++)p.currentTarget=A[K],f&=Kb(g,A[K],d,n,p)}}else f=Lb(c,p)}finally{A&&(A.length=0)}return f}d=new Bb(b,this);return f=Lb(c,d)};function Mb(){}w(Mb,yb);q=Mb.prototype;q.Zb=l;q.od=m;q.addEventListener=function(a,b,c,d){P(this,a,b,c,d)};q.removeEventListener=function(a,b,c,d){Hb(this,a,b,c,d)};
q.dispatchEvent=function(a){var b=a.type||a,c=O;if(b in c){if(v(a))a=new zb(a,this);else if(a instanceof zb)a.target=a.target||this;else{var d=a,a=new zb(b,this);Ma(a,d)}var d=1,e,c=c[b],b=l in c,f;if(b){e=[];for(f=this;f;f=f.od)e.push(f);f=c[l];f.U=f.Y;for(var g=e.length-1;!a.ma&&0<=g&&f.U;g--)a.currentTarget=e[g],d&=Kb(f,e[g],a.type,l,a)&&a.Lb!=n}if(n in c)if(f=c[n],f.U=f.Y,b)for(g=0;!a.ma&&g<e.length&&f.U;g++)a.currentTarget=e[g],d&=Kb(f,e[g],a.type,n,a)&&a.Lb!=n;else for(e=this;!a.ma&&e&&f.U;e=
e.od)a.currentTarget=e,d&=Kb(f,e,a.type,n,a)&&a.Lb!=n;a=Boolean(d)}else a=l;return a};var Nb,Ob,Pb,Qb,Rb,Sb=$a();Ob=(Nb=M&&db&&/(ipod|iphone|ipad)/i.test(Sb))&&ea(Object.freeze);Pb=M&&db&&/(android)/i.test(Sb);Qb=M&&/playbook/i.test(Sb);Rb=t(document.ontouchmove);var Tb;function Ub(a,b){var c;c=a.className;c=v(c)&&c.match(/\S+/g)||[];for(var d=Ha(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=za(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var Vb=!J||qb(9);!L&&!J||J&&qb(9)||L&&N("1.9.1");J&&N("9");function Wb(a){return a?new Xb(Yb(a)):Tb||(Tb=new Xb)}var Zb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function $b(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new z(a.clientWidth,a.clientHeight)}function ac(a,b,c){return bc(document,arguments)}
function bc(a,b){var c=b[0],d=b[1];if(!Vb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',ta(d.name),'"');if(d.type){c.push(' type="',ta(d.type),'"');var e={};Ma(e,d);d=e;delete d.type}c.push(">");c=c.join("")}var f=a.createElement(c);d&&(v(d)?f.className=d:u(d)?Ub.apply(m,[f].concat(d)):ub(d,function(a,b){"style"==b?f.style.cssText=a:"class"==b?f.className=a:"for"==b?f.htmlFor=a:b in Zb?f.setAttribute(Zb[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?f.setAttribute(b,a):
f[b]=a}));2<b.length&&cc(a,f,b,2);return f}function cc(a,b,c,d){function e(c){c&&b.appendChild(v(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d],g=f,j=ca(g);if(("array"==j||"object"==j&&"number"==typeof g.length)&&!(fa(f)&&0<f.nodeType)){g=Aa;a:{if((j=f)&&"number"==typeof j.length){if(fa(j)){j="function"==typeof j.item||"string"==typeof j.item;break a}if(ea(j)){j="function"==typeof j.item;break a}}j=n}g(j?Fa(f):f,e)}else e(f)}}
function dc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function ec(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Yb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function fc(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(var c;c=a.firstChild;)a.removeChild(c);a.appendChild(Yb(a).createTextNode(b))}}function Xb(a){this.va=a||r.document||document}function gc(a,b){var c;c=a.va;var d=b&&"*"!=b?b.toUpperCase():"";c=c.querySelectorAll&&c.querySelector&&d?c.querySelectorAll(d+""):c.getElementsByTagName(d||"*");return c}q=Xb.prototype;
q.Tc=function(a,b,c){return bc(this.va,arguments)};q.createElement=function(a){return this.va.createElement(a)};q.createTextNode=function(a){return this.va.createTextNode(a)};q.appendChild=function(a,b){a.appendChild(b)};q.append=function(a,b){cc(Yb(a),a,arguments,1)};q.contains=ec;function hc(a,b,c){a.style[String(c).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})]=b}function ic(a,b){var c;a:{c=Yb(a);if(c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,m))){c=c[b]||c.getPropertyValue(b)||"";break a}c=""}return c||(a.currentStyle?a.currentStyle[b]:m)||a.style&&a.style[b]}
function jc(a){var b=a.getBoundingClientRect();J&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function kc(a){if(J&&!qb(8))return a.offsetParent;for(var b=Yb(a),c=ic(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=ic(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return m}function lc(a,b,c){if(b instanceof z)c=b.height,b=b.width;else if(c==h)throw Error("missing height argument");a.style.width=mc(b);a.style.height=mc(c)}
function mc(a){"number"==typeof a&&(a=Math.round(a)+"px");return a}function nc(a){if("none"!=ic(a,"display"))return oc(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=oc(a);b.display=c;b.position=e;b.visibility=d;return a}function oc(a){var b=a.offsetWidth,c=a.offsetHeight,d=M&&!b&&!c;return(!t(b)||d)&&a.getBoundingClientRect?(a=jc(a),new z(a.right-a.left,a.bottom-a.top)):new z(b,c)}
function pc(a){var b=Wb(h),c=m;if(J)b=c=b.va.createStyleSheet(),J?b.cssText=a:b.innerHTML=a;else{var d=gc(b,"head")[0];d||(c=gc(b,"body")[0],d=b.Tc("head"),c.parentNode.insertBefore(d,c));var e=c=b.Tc("style");J?e.cssText=a:e.innerHTML=a;b.appendChild(d,c)}return c};var qc,rc,sc,tc,uc,vc,wc,xc=M?"Webkit":L?"Moz":cb?"O":J?"ms":"",yc=ac("div").style;qc="-"+xc.toLowerCase()+"-transform";rc=function(a){return yc[a]!==h?a:n};sc=function(a){var b=a.charAt(0).toLowerCase()+a.substr(1),c=xc+a;return rc(a)?a:rc(b)?b:rc(c)?c:h};var zc,Ac=sc("BorderRadius");zc=function(a,b,c,d){d=d?"%":"px";c=t(c)?c:b;b=(u(b)?b.join(d+" "):b)+d+"/"+((u(c)?c.join(d+" "):c)+d);b!=a.zd&&(a.style[Ac]=a.zd=b)};function Ra(a){this.Sb=[];this.precision=1;this.yb=l;this.pe&&Qa(this,a)}
function Bc(a,b){a.yb=b;return a}Ra.prototype.scale=function(a,b){this.Sb.push("scale("+a+","+b+")");return this};Ra.prototype.rotate=function(a,b){var c;c=this.yb&&(Nb||Qb)?"rotate3d(0, 0, 1, "+a+(b?b:"deg")+")":"rotate("+a+(b?b:"deg")+")";0!=a&&this.Sb.push(c);return this};Ra.prototype.translate=function(a,b,c){var d=1/this.precision,e="translate";if(this.yb&&(Nb||Qb))e+="3d";e+="("+a*d+"px,"+b*d+"px";if(this.yb&&(Nb||Qb))e+=","+(c?c:0)*d+"px";this.Sb.push(e+")");return this};
function Qa(a,b){if(1!=a.precision){var c=1/a.precision;a.scale(c,c);a.precision=1}1!=b&&(a.scale(b,b),a.precision=b);return a}Ra.prototype.toString=function(){1!=this.precision&&Qa(this,1);return this.Sb.join(" ")};var Pa,Cc=sc("Transform");Pa=function(a,b){var c=b.toString();c!=a.fe&&(a.style[Cc]=a.fe=c);pa=1};var Na,Dc=sc("TransformOrigin");Na=function(a,b,c,d){d=d?"%":"px";b=b+d+" "+c+d;b!=a.ge&&(a.style[Dc]=a.ge=b)};var Ec=sc("Transition");tc=!!Ec&&!cb;
function Fc(a,b){if(!a.length)return a;for(var c=a.split("),"),d=0;d<c.length-1;d++)c[d]+=")";c=Ba(c,function(a){return-1==a.indexOf(b)});return c.join(",")}uc=function(a,b,c,d){if(Ec){var e=Fc(a.style[Ec],b);e.length&&(e+=", ");e+=b+" "+c+"s cubic-bezier("+d[1]+","+d[2]+","+d[3]+","+d[4]+")";a.style[Ec]=e}};vc=function(a,b){Ec&&a&&(a.style[Ec]=Fc(a.style[Ec],b))};wc=function(a,b,c){if(a.he!=b||a.Jd!=c)a.he=b,a.Jd=c,lc(a,b,c)};var H=new Ka;H.Ea=function(){for(var a=0,b,c=0;b=this.e[c];c++)b=b instanceof Q?b.D:b,b==this.a.childNodes[a]?a++:(ec(this.T,b)&&dc(b),H.xd(this.T,b,a++))};
H.Cd=function(){var a=this.f(),b=this.Ka,c=this.h,d=this.da||1,e=this.Gc;this.l[G]&&(c=this.l[G]);var f=Math.round(a.width*d),g=Math.round(a.height*d),j=this.u.d();this.l[E]&&(j=this.l[E].d());0!=f?j.scale(a.width/(f*b/d)):j.scale(1/b);wc(this.a,f,g);Na(this.a,100*this.ca.x,100*this.ca.y,l);f=this.ca.x*a.width*d;g=this.ca.y*a.height*d;a=c.x*d/b-f;b=c.y*d/b-g;c=this.P?this.P.Tb:0;(0!=f-c||0!=g-c)&&(this.a==this.T&&this.e.length)&&H.Rd.call(this);this.a!=this.T&&!this.W[G]&&(!this.W[E]&&!this.W[Oa])&&
Pa(this.T,Bc(new Ra,e).translate(f-c,g-c));this.j!=this.ja&&(this.ja&&H.qd.call(this),this.j&&H.Ec.call(this));e=Bc(Qa(new Ra,0.1),e);this.j&&(H.Nc.call(this.j),Qa(Qa(e,0.1).translate(-this.j.Pd-f,-this.j.Qd-g).rotate(this.j.hd,"rad").translate(f,g),1));f=-(this.I%=360);t(this.l[Oa])&&(f=-this.l[Oa]);e.translate(a,b).scale(j.x,j.y).rotate(f);!this.W[G]&&(!this.W[E]&&!this.W[Oa])&&Pa(this.a,e)};
H.update=function(){if(this.a){H.Cd.call(this);if(!this.W[Gc]){var a=this.C;t(this.l[Gc])&&(a=this.l[Gc]);if(this.p&Hc){var b=this.a.style;"opacity"in b?b.opacity=a:"MozOpacity"in b?b.MozOpacity=a:"filter"in b&&(b.filter=""===a?"":"alpha(opacity="+100*a+")")}}this.p&Ic&&(this.a.style.display=this.Ab?"none":"block");this.Aa||this.n.z.call(this,this.a)}};
H.Nc=function(){if(t(this.zc)&&this.zc.q){var a=this.zc,b=F(this),c=new y(b.left,b.top),d=new y(b.right,b.top),e=new y(b.right,b.bottom),b=a.getParent(),c=!this.q?c:b.ia(this.ib(c)),d=!this.q?d:b.ia(this.ib(d)),e=!this.q?e:b.ia(this.ib(e)),b=Math.atan2(c.y-d.y,d.x-c.x),f=d.x-c.x,g=c.y-d.y,j=e.x-d.x,k=e.y-d.y,d=Math.cos(b),e=Math.sin(b);this.mc=Math.round(Math.sqrt(f*f+g*g));this.lc=Math.round(Math.sqrt(j*j+k*k));B(a.n)==H&&(f=a.D,lc(f,this.mc,this.lc),Pa(f,Bc(Qa(new Ra,0.1),this.Gc).translate(c.x,
c.y).rotate(-b,"rad")));B(this.n)==H&&(this.a.style.display="none");this.gd=Jc(a,c.d());this.Od=l;this.Pd=d*c.x-e*c.y;this.Qd=d*c.y+e*c.x;this.hd=b}};H.xd=function(a,b,c){c==h||a.childNodes.length<=c?a.appendChild(b):a.insertBefore(b,a.childNodes[c])};H.Rd=function(){this.T=ac("div");for(var a=document.createDocumentFragment(),b;b=this.a.firstChild;)this.a.removeChild(b),a.appendChild(b);this.T.appendChild(a);this.a.appendChild(this.T)};
H.qd=function(){if(this.a!=this.D){if(B(this.n)==H){dc(this.a);var a=this.D,b=a.parentNode;b&&b.replaceChild(this.a,a);this.D=this.a}this.ja.ic=0;this.ja=m}};H.Ec=function(){if(B(this.n)==H){this.D=ac("div");this.D.style.cssText="position:absolute;overflow:hidden;";Na(this.D,0,0);var a=this.a,b=a.parentNode;b&&b.replaceChild(this.D,a);this.D.appendChild(this.a)}this.j.ic=1;this.j.zc=this;this.ja=this.j;R(this.j,Kc)};function Lc(a,b){a!=m&&this.append.apply(this,arguments)}Lc.prototype.Xa="";Lc.prototype.append=function(a,b,c){this.Xa+=a;if(b!=m)for(var d=1;d<arguments.length;d++)this.Xa+=arguments[d];return this};Lc.prototype.toString=aa("Xa");J&&N(8);var Mc=[[],[]],Nc=[[],[]];qa=function(a,b,c){Da((c?Nc:Mc)[b||0],a)};ra=function(){for(var a,b=0;2>b;b++){for(;Mc[b].length;)a=Mc[b][0],a.update(b),a.p=0,a==Mc[b][0]&&Mc[b].shift();Mc[b]=[]}Nc=[[],[]]};var Kc=1,Hc=16,Ic=32,G=1,E=2,Oa=4,Gc=5,Oc;var Pc=new Lc;
Pc.append(".","lime-director"," {position:absolute; -webkit-transform-origin: 0 0; -moz-transform-origin: 0 0; -o-transform-origin: 0 0; image-rendering:  optimizeSpeed; overflow: hidden;}.","lime-director"," div, .","lime-director"," img, .","lime-director"," canvas {-webkit-transform-origin: 0 0; -moz-transform-origin: 0 0; -o-transform-origin: 0 0; position: absolute; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; -moz-user-select: none; -webkit-user-select: none; -webkit-user-drag: none;}.",
"lime-scene"," {position:absolute; width:100%; height:100%; left: 0px; top: 0px; overflow: hidden; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;}.","lime-fps"," {float: left; background: #333; color: #fff; position: absolute; top:0px; left: 0px; padding:2px 4px;}div.","lime-layer"," {position: absolute; left: 0px; top: 0px; width:0px; height:0px; border: none !important;}.","lime-cover"," {position: absolute; left: 0px; top: 0px;}.","lime-button"," {cursor: pointer;}");
Oc=Pc.toString();pc(Oc);function Q(){this.e=[];this.g=m;this.pa={};this.l={};this.W={};this.Ac={};this.Gc=l;this.q=n;this.vc=this.$b=m;this.F={};this.Oa(1);this.b(0,0);this.c(0,0);this.Ka=1;this.O(0.5,0.5);this.I=0;this.l[Oa]||R(this,Kc);this.Jc=0;R(this,7);this.C=1;Qc(this,m);Rc(this,B(this.Ba[0]));R(this,64)}w(Q,Mb);q=Q.prototype;q.Ba=[H,C];function Rc(a,b){if(!a.n||B(a.n)!=b){for(var c=-1,d=0;d<a.Ba.length;d++)if(B(a.Ba[d])==b){c=d;break}if(-1==c)return a;a.n=a.Ba[d];R(a,64);for(d=0;c=a.e[d];d++)Rc(c,b)}return a}
q.kb=function(){return!(this.g&&B(this.g.n)==C)};function Sc(a){return a.kb()?(a.kb()?Tc(a):Uc(a),a):a.g?Sc(a.g):m}function Vc(a){if(!a.g||a instanceof D)return[];var b=a.g.e.indexOf(a),a=Vc(a.g);a.push(b);return a}function Wc(a,b){if(a==b)return 0;for(var c=Vc(a),d=Vc(b),e=0;;){if(c.length<=e)return 1;if(d.length<=e)return-1;if(c[e]==d[e])e++;else return c[e]>d[e]?-1:1}}q.Zb=n;
function R(a,b,c,d){b&&!a.p&&qa(a,c,d);a.p|=b;if(64==b)for(c=0;d=a.e[c];c++)d instanceof Q&&R(d,64);if(!t(a.p)||!b)a.p=0;b&&a.Aa&&(a.Od=n,R(a.Aa,-1));return a}q.Oa=function(a,b){this.u=1==arguments.length&&da(a)?new I(a,a):2==arguments.length?new I(arguments[0],arguments[1]):a;return this.l[E]?this:R(this,2)};q.b=function(a,b){this.h=2==arguments.length?new y(arguments[0],arguments[1]):a;return this.l[G]?this:R(this,Kc)};
function Qc(a,b){if(b!=a.j){if(a.j){var c=a.j;delete c.vb;Xc(c,c.getParent());delete a.j.Aa}a.j=b;a.j&&(c=a.j,c.vb=l,c.q&&Yc(c,c.getParent()),a.j.Aa=a);R(a,4)}}q.O=function(a,b){this.ca=2==arguments.length?new I(arguments[0],arguments[1]):a;return R(this,Kc)};function Zc(a,b){a.Ab=b;R(a,Ic);a.Ic=0}q.f=aa("s");
q.c=function(a,b){var c=this.s,d,e;d=2==arguments.length?new z(arguments[0],arguments[1]):a;var f=this.ca;if(c&&this.e.length)for(var g=0;g<this.e.length;g++){var j=this.e[g];if(j.Hd){var k=j.Jc;if(0!=k){var p=$c(j);e=c.width;var s=p.left+f.x*c.width,A=p.right-p.left,Y=e-p.right-f.x*c.width;k&1&&(e-=s);k&2&&(e-=A);k&4&&(e-=Y);e!=c.width&&(e=(d.width-e)/(c.width-e),k&1&&(s*=e),k&2&&(A*=e));e=c.height;var Y=p.top+f.y*c.height,K=p.bottom-p.top,p=e-p.bottom-f.y*c.height;k&8&&(e-=Y);k&16&&(e-=K);k&32&&
(e-=p);e!=c.height&&(e=(d.height-e)/(c.height-e),k&8&&(Y*=e),k&16&&(K*=e));k=j.ca;j.c(A,K);j.b(s+k.x*A-f.x*d.width,Y+k.y*K-f.y*d.height)}}}this.s=d;return R(this,2)};function ad(a){a.da||bd(a);return a.da}function bd(a){var b=t(a.da)?a.da:a.Ka;a.g&&a.g.da&&(b=a.Ka*a.g.da);if(b!=a.da){a.da=b;for(var b=0,c;c=a.e[b];b++)c instanceof Q&&bd(c);R(a,2)}}q.Hd=aa("Jc");q.ia=function(a){if(!this.q)return a;a=this.getParent().ia(a);return Jc(this,a)};
function Jc(a,b){if(!a.getParent())return m;b.x-=a.h.x;b.y-=a.h.y;b.x/=a.u.x;b.y/=a.u.y;if(0!=a.I){var c=b.d(),d=a.I*Math.PI/180,e=Math.cos(d),d=Math.sin(d);b.x=e*c.x-d*c.y;b.y=e*c.y+d*c.x}return b}q.ib=function(a){return!this.q?a:this.getParent().ib(Sa(this,a))};function Sa(a,b){if(!a.getParent())return b;var c=b.d();if(0!=a.I){var d=-a.I*Math.PI/180,e=Math.cos(d),d=Math.sin(d);c.x=e*b.x-d*b.y;c.y=e*b.y+d*b.x}c.x*=a.u.x;c.y*=a.u.y;c.x+=a.h.x;c.y+=a.h.y;return c}
function cd(a,b){a.C=b;var c=a.Ab;0==a.C&&!c?(Zc(a,l),a.Ic=1):0!=a.C&&(c&&a.Ic)&&Zc(a,n);if(t(a.l[Gc]))return a;R(a,Hc);return a}function Tc(a){function b(){this.a=this.D=this.T=ac(c);this.bb&&Ub(this.a,this.bb);this.p|=-1}var c=B(a.n)==C?"canvas":"div";if(a.a){if(a.a.tagName.toLowerCase()!=c){var d=a.D;b.call(a);d.parentNode&&d.parentNode.replaceChild(a.D,d)}}else b.call(a)}function Uc(a){a.D&&(dc(a.D),delete a.a,delete a.D,delete a.T)}
q.Ea=function(){this.p&=-65;this.kb()?Tc(this):Uc(this);if(this.g&&this.g.p&64)this.g.Ea();else if(this.kb()){for(var a=0,b;b=this.e[a];a++)b instanceof Q&&b.Ea();this.n.Ea.call(this)}};
q.update=function(a){var b,c,a=a||0;ga(this);this.p&64&&this.Ea();var d=B(this.n)==H||a;if(d){for(var e in this.Ac)delete this.l[e],delete this.W[e],b=parseInt(e,10)==Gc?"opacity":qc,vc(this.a,b),this.a!=this.T&&vc(this.ke,b);b=0;for(e in this.pa)c=this.pa[e],c[3]||(c[3]=1,e==G&&this.Wd!=this.h&&(R(this,Kc,0,l),b=1),e==E&&this.Zd!=this.u&&(R(this,2,0,l),b=1),e==Gc&&this.Td!=this.C&&(R(this,Hc,0,l),b=1),e==Oa&&this.Yd!=this.I&&(R(this,128,0,l),b=1));if(!b)for(e in this.pa){c=this.pa[e];b=parseInt(e,
10)==Gc?"opacity":qc;if(B(this.n)==H||"opacity"!=b)this.l[e]=c[0],uc(this.a,b,c[1],c[2]),this.a!=this.T&&b==qc&&uc(this.T,b,c[1],c[2]);delete this.pa[e]}this.Wd=this.h;this.Zd=this.u;this.Td=this.C;this.Yd=this.I;this.Ac={}}a?this.n.Bd.call(this):(B(this.n)==C&&(c=Sc(this),c.Jb=1,c==this&&(this.p==Kc&&!this.j)&&(c.Jb=0),qa(Sc(this),1)),this.n.update.call(this));if(d)for(e in this.l)this.l[e]&&(this.W[e]=l);if(this.ta)for(e=0;e<this.ta.length;e++)R(this.ta[e],7);R(this,0,a)};
q.getParent=function(){return this.g?this.g:m};q.appendChild=function(a,b){a instanceof Q&&a.getParent()?a.getParent().removeChild(a):a.parentNode&&dc(a);a.g=this;b==h?this.e.push(a):Ga(this.e,b,0,a);B(this.n)!=H&&Rc(a,B(this.n));a instanceof Q&&(bd(a),this.q&&dd(a));return R(this,64)};
q.removeChild=function(a){a=this.e.indexOf(a);if(0<=a&&this.e.length>a){var b=0<=a&&this.e.length>a?this.e[a]:m;b.Aa&&Qc(b.Aa,m);b instanceof Q?(this.q&&ed(b),Uc(b),b.g=m):dc(b);this.e.splice(a,1);a=R(this,64)}else a=this;return a};q.addEventListener=function(a){Rb&&"mouse"==a.substring(0,5)||(t(this.F[a])||(this.F[a]=[0,0]),this.q&&0==this.F[a][0]&&(this.F[a][0]=1,this.M().Ha.Kb(this,a)),this.F[a][1]++)};
q.removeEventListener=function(a){Rb&&"mouse"==a.substring(0,5)||(this.q&&1==this.F[a][1]&&(this.F[a][0]=0,this.M().Ha.lb(this,a)),this.F[a][1]--,this.F[a][1]||delete this.F[a])};q.M=function(){return!this.q?m:this.$b};q.zb=function(){return!this.q?m:this.vc};function ed(a){var b;a.vb||Xc(a,a.getParent());for(var c=0;b=a.e[c];c++)b instanceof Q&&ed(b);for(var d in a.F){a.F[d][0]=0;if(!a.M())debugger;a.M().Ha.lb(a,d)}fd(a.M().Ha,a);a.q=n;a.$b=m;a.vc=m}
function dd(a){a.q=l;a.$b=a.g.M();a.vc=a.g.zb();for(var b=0,c;c=a.e[b];b++)c instanceof Q&&dd(c);for(var d in a.F)a.F[d][0]=1,a.M().Ha.Kb(a,d);a.vb&&(a.vb=l,a.q&&Yc(a,a.getParent()));fd(a.M().Ha,a)}function Yc(a,b){b.ta||(b.ta=[]);Da(b.ta,a);!b&&!(b.getParent()instanceof D)&&Yc(a,b.getParent())}function Xc(a,b){b&&b.ta&&(Ea(b.ta,a),Xc(a,b.getParent()))}function F(a){var b=a.f(),a=a.ca;return new Ia(-b.height*a.y,b.width*(1-a.x),b.height*(1-a.y),-b.width*a.x)}
function $c(a,b){var c=b||F(a),d=new y(c.left,c.top),e=new y(c.right,c.top),f=new y(c.left,c.bottom),c=new y(c.right,c.bottom),d=Sa(a,d),e=Sa(a,e),f=Sa(a,f),c=Sa(a,c);return new Ia(Math.floor(Math.min(d.y,e.y,f.y,c.y)),Math.ceil(Math.max(d.x,e.x,f.x,c.x)),Math.ceil(Math.max(d.y,e.y,f.y,c.y)),Math.floor(Math.min(d.x,e.x,f.x,c.x)))}
q.Gb=function(){var a=F(this);a.left==a.right&&this.e.length&&(a=$c(this.e[0],this.e[0].Gb()));for(var b=0,c;c=this.e[b];b++)if(1!=c.ic){var d=a;c=$c(c,c.Gb());d.left=Math.min(d.left,c.left);d.top=Math.min(d.top,c.top);d.right=Math.max(d.right,c.right);d.bottom=Math.max(d.bottom,c.bottom)}return a};q.ka=function(a){this.Ac[a]=1};q.ya=function(a){var b=this.ia(a.Ma);return F(this).contains(b)?(a.position=b,l):n};function gd(a,b){Da(b.Da,a);b.play()};function S(){Q.call(this);this.bb="lime-layer"}w(S,Q);S.prototype.ya=function(a){for(var b=0,c;c=this.e[b];b++)if(c.ya(a))return a.position=this.ia(a.Ma),l;return n};var T=new function(){this.ba=[];this.Fa=n;this.cd=0;this.bc=1E3/30;this.za=0};function hd(a,b){this.w=this.kd=a;this.jc=t(b)?b:-1;this.la=[]}hd.prototype.Qa=function(a){if(this.la.length)if(this.w>a)this.w-=a;else{var b=this.kd+a-this.w;this.w=this.kd-(a-this.w);0>this.w&&(this.w=0);for(var c,a=this.la.length;0<=--a;)(c=this.la[a])&&(c[0]&&ea(c[1]))&&c[1].call(c[2],b);-1!=this.jc&&(this.jc--,0==this.jc&&T.rb(c[1],c[2]))}};T.ba.push(new hd(0));T.Cc=r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame;
T.me=aa("bc");T.se=function(a){this.bc=a;this.Fa&&(T.Vc(),T.Dc())};T.wc=function(a,b,c){c=t(c)?c:this.ba[0];Da(c.la,[1,a,b]);Da(this.ba,c);this.Fa||T.Dc()};T.rb=function(a,b){for(var c=this.ba.length;0<=--c;){for(var d=this.ba[c],e=d.la,f,g=e.length;0<=--g;)f=e[g],f[1]==a&&f[2]==b&&Ea(e,f);0==e.length&&0!=c&&Ea(this.ba,d)}1==this.ba.length&&0==this.ba[0].la.length&&T.Vc()};
T.Dc=function(){this.Fa||(this.za=na(),T.Cc?r.mozRequestAnimationFrame?11<=hb?(this.sa=la(T.Hc,this),r.mozRequestAnimationFrame(this.sa)):(r.mozRequestAnimationFrame(),this.Lc=la(T.yd,this),r.addEventListener("MozBeforePaint",this.Lc,n)):(this.sa=la(T.Hc,this),r.webkitRequestAnimationFrame(this.sa)):this.cd=setInterval(la(T.de,this),T.bc),this.Fa=l)};
T.Vc=function(){this.Fa&&(T.Cc?r.mozRequestAnimationFrame?11<=hb?r.mozCancelRequestAnimationFrame(this.sa):r.removeEventListener("MozBeforePaint",this.Lc,n):r.webkitCancelRequestAnimationFrame(this.sa):clearInterval(this.cd),this.Fa=n)};T.Hc=function(a){var b=r.performance,c;b&&(c=b.now||b.webkitNow)?a=b.timing.navigationStart+c.call(b):a||(a=na());b=a-this.za;0>b&&(b=1);T.ac(b);this.za=a;r.webkitRequestAnimationFrame?r.webkitRequestAnimationFrame(this.sa):r.mozRequestAnimationFrame(this.sa)};
T.yd=function(a){T.ac(a.timeStamp-this.za);this.za=a.timeStamp;r.mozRequestAnimationFrame()};T.de=function(){var a=na(),b=a-this.za;0>b&&(b=1);T.ac(b);this.za=a};T.ac=function(a){for(var b=this.ba.slice(),c=b.length;0<=--c;)b[c].Qa(a);1==pa&&(/Firefox\/4./.test($a())&&!oa.je)&&(T.md?(document.body.style.MozTransform="",T.md=0):(document.body.style.MozTransform="scale(1,1)",T.md=1),pa=0)};
T.Ad=function(a){for(var b,c,d,e,f=this.ba.length;0<=--f;){b=this.ba[f];for(e=b.la.length;0<=--e;)d=b.la[e],c=d[2],ea(c.M)&&(c=c.M(),c==a&&(d[0]=l))}};T.Oc=function(a,b,c){T.xc(a,b,c,1)};T.xc=function(a,b,c,d){T.wc(a,b,new hd(c,d))};function U(){this.Da=[];this.hc=[];this.Qb={};this.ne=n;this.m=1;this.xb=id;this.J=0}w(U,Mb);q=U.prototype;q.scope="";q.A=function(a){this.m=a;return this};q.play=function(){this.rc=0;this.Yc=this.J=1;T.wc(this.Qa,this);this.dispatchEvent({type:"start"})};q.stop=function(){if(0!=this.J){var a=this.hc;if(jd(this)&&this.ka)for(var b=a.length;0<=--b;)this.ka(a[b]);this.hc=[];this.Qb={};this.J=0;T.rb(this.Qa,this);this.dispatchEvent({type:"stop"})}};q.jb=function(){return{}};
function kd(a,b){var c=ga(b);t(a.Qb[c])||(a.fb(b),a.Qb[c]=a.jb(b));return a.Qb[c]}q.fb=function(a){ld.Kb(this,a);this.J=1;Da(this.hc,a);this.Pb&&(!this.rd&&this.Ya)&&this.Ya()};q.M=function(){return this.Da[0]?this.Da[0].M():m};q.Qa=function(a){this.Pb&&(!this.rd&&this.Ya)&&this.Ya();this.Yc&&(delete this.Yc,a=1);this.rc+=a;this.le=a;a=this.rc/(1E3*this.m);if(isNaN(a)||1<=a)a=1;a=this.qa(a,this.Da);1==a&&this.stop()};
q.qa=function(a,b){a=this.xb[0](a);isNaN(a)&&(a=1);for(var c=b.length;0<=--c;)this.update(a,b[c]);return a};function jd(a){return 0<a.m&&tc&&a.Ud&&!Pb&&!L}function md(a){a.Ud=t(h)?h:l;return a}var ld=new function(){this.i={}};ld.Kb=function(a,b){if(a.scope.length){var c=ga(b);t(this.i[c])||(this.i[c]={});t(this.i[c][a.scope])&&this.i[c][a.scope].stop();this.i[c][a.scope]=a}};ld.ue=function(a){a=ga(a);if(t(this.i[a]))for(var b in this.i[a])this.i[a][b].stop(),delete this.i[a][b]};
function nd(a){var b,c,d,e;d=a;for(c=0;8>c;c++){e=((od*d+pd)*d+qd)*d-a;if(5E-5>(0<=e?e:0-e))return d;b=(3*od*d+2*pd)*d+qd;if(1E-6>(0<=b?b:0-b))break;d-=e/b}b=0;c=1;d=a;if(d<b)return b;if(d>c)return c;for(;b<c;){e=((od*d+pd)*d+qd)*d;if(5E-5>(0<=e-a?e-a:0-(e-a)))break;a>e?b=d:c=d;d=0.5*(c-b)+b}return d}var od=0,pd=0,qd=0,rd=0,sd=0,td=0,id;id=[function(a){qd=1.26;pd=3*(0.58-0.42)-qd;od=1-qd-pd;td=0;sd=3-td;rd=1-td-sd;return((rd*nd(a)+sd)*nd(a)+td)*nd(a)},0.42,0,0.58,1];var ud={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function vd(a){var b={},a=String(a),c="#"==a.charAt(0)?a:"#"+a;if(wd.test(c))return b.fc=xd(c),b.type="hex",b;a:{var d=a.match(yd);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length){e=c[0];a=c[1];c=c[2];e=Number(e);a=Number(a);c=Number(c);if(isNaN(e)||0>e||255<e||isNaN(a)||0>a||255<a||isNaN(c)||0>c||255<c)throw Error('"('+e+","+a+","+c+'") is not a valid RGB color');e=zd(e.toString(16));a=zd(a.toString(16));c=zd(c.toString(16));
b.fc="#"+e+a+c;b.type="rgb";return b}if(ud&&(c=ud[a.toLowerCase()]))return b.fc=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Ad=/#(.)(.)(.)/;function xd(a){if(!wd.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Ad,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Bd(a,b,c){0>c?c+=1:1<c&&(c-=1);return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var wd=/^#(?:[0-9a-f]{3}){1,2}$/i,yd=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;
function zd(a){return 1==a.length?"0"+a:a};function Cd(){}w(Cd,Mb);Cd.prototype.gc=ba;function Dd(a){if(a[0]instanceof Cd)return a[0];u(a)||(a=Fa(arguments));return 2<a.length?new Ed(a):v(a[0])&&("rgb("==a[0].substring(0,4)||"rgba("==a[0].substring(0,5)||"#"==a[0].substring(0,1))?new Ed(a[0]):new Fd(a[0])}Cd.prototype.ob=ba;Cd.prototype.nb=ba;function Ed(a){this.ra=1;this.Na(a)}w(Ed,Cd);q=Ed.prototype;q.id="color";function Gd(a,b){return Hd(a,2,b)}
function Hd(a,b,c){var c=c||0.1,d,e=m;if(da(a.t)&&da(a.Ia)&&da(a.Ga))e=[a.t,a.Ia,a.Ga,a.ra];else if(v(a.ea)){var f=vd(a.ea);"named"!=f.type&&(e=f.fc,e=xd(e),e=[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]);e.push(1)}d=e;if(!d)return a;d.pop();e=d[0]/255;f=d[1]/255;d=d[2]/255;var g=Math.max(e,f,d),j=Math.min(e,f,d),k=0,p=0,s=0.5*(g+j);g!=j&&(g==e?k=60*(f-d)/(g-j):g==f?k=60*(d-e)/(g-j)+120:g==d&&(k=60*(e-f)/(g-j)+240),p=0<s&&0.5>=s?(g-j)/(2*s):(g-j)/(2-2*s));d=[Math.round(k+
360)%360,p,s];d[b]+=c;1<d[b]&&(d[b]=1);b=d[1];c=d[2];g=f=e=0;d=d[0]/360;0==b?e=f=g=255*c:(j=g=0,j=0.5>c?c*(1+b):c+b-b*c,g=2*c-j,e=255*Bd(g,j,d+1/3),f=255*Bd(g,j,d),g=255*Bd(g,j,d-1/3));d=[Math.round(e),Math.round(f),Math.round(g)];d.push(a.ra);return a.Na(d)}
q.Na=function(a){var b=a;if(v(a))return this.ea=a,this;2<arguments.length&&(b=arguments);3<=b.length&&(this.t=b[0],this.Ia=b[1],this.Ga=b[2]);4==b.length&&(this.ra=b[3]);this.ea=1==this.ra?"rgb("+this.t+","+this.Ia+","+this.Ga+")":"rgba("+this.t+","+this.Ia+","+this.Ga+","+this.ra+")";return this};q.ob=function(a){a.style.background=this.ea};q.nb=function(a){a.fillStyle=this.ea};q.d=function(){var a=new Ed("");a.t=this.t;a.Ia=this.Ia;a.Ga=this.Ga;a.ra=this.ra;a.ea=this.ea;return a};function Fd(a){a&&ea(a.data)&&(a=a.data());v(a)?(this.X=a,50<this.X.length&&(this.X=this.X.substr(-50)),Id[this.X]?this.G=Id[this.X]:(this.G=new Image,this.G.src=a)):(this.X=a.src,50<this.X.length&&(this.X=this.X.substr(-50)),this.G=Id[this.X]?Id[this.X]:a);Jd(this)||P(this.G,"load",this.Kd,n,this);Id[this.X]=this.G}w(Fd,Cd);var Id={};q=Fd.prototype;q.id="image";
q.gc=function(a){var b=a.f(),c=this;!b.width&&!b.height&&(Jd(this)?a.c(this.G.width,this.G.height):P(this,"load",function(){var a=this.f();!a.width&&!a.height&&this.c(c.G.width,c.G.height)},n,a));Jd(this)||P(this,"load",function(){R(a,4)},n,this)};q.Kd=function(a){this.dispatchEvent(a)};function Jd(a){return!(!a.G||!a.G.width||!a.G.height)}q.c=function(a,b,c){da(a)&&(a=new z(a,b),b=c||n);this.s=a;this.ae=b;return this};
function Kd(a,b){var c=b.f().d();a.s&&(a.ae?(c.width*=a.s.width,c.height*=a.s.height):c=a.s);var d=new y(0,0);a.pc&&(a.oe?(d.x=c.width*a.pc.x,d.y=c.height*a.pc.y):d=a.pc);return[c,d]}q.ob=function(a,b){a.style.background="url("+this.G.src+")";var c=Kd(this,b),d=c[0],c=c[1],e=ad(b);a.style[sc("BackgroundSize")]=d.width*e+"px "+d.height*e+"px";d=b.P?b.P.Tb:0;a.style.backgroundPosition=c.x*e-d+"px "+(c.y*e-d)+"px";this.tc&&(a.style.imageRendering="optimizeQuality")};
q.nb=function(a,b){var c=b.f(),d=F(b);if(c.width&&c.height)try{var e=this.G,f=Kd(this,b),g=f[0],j=f[1],k=a.createPattern(e,"repeat"),p=g.width/e.width,s=g.height/e.height;a.save();a.translate(d.left+j.x,d.top+j.y);a.scale(p,s);a.fillStyle=k;a.fillRect(-j.x/p,-j.y/s,c.width/p,c.height/s);a.restore()}catch(A){}};C.B={};H.B={};function V(){Q.call(this);this.P=this.cb=m}w(V,Q);V.prototype.id="sprite";V.prototype.Ba=[La(H,H.B),La(C,C.B)];V.prototype.o=function(a,b,c,d){this.cb=Dd(Fa(arguments));this.cb.gc(this);R(this,4);return this};H.B.z=function(a){this.cb===m||this.cb.ob(a,this);this.P===m?v("border-width")?hc(a,0,"border-width"):ub("border-width",ma(hc,a)):this.P.ob(a,this)};
C.B.z=function(a){var b=this.f(),c=this.cb,d=this.P;if(c||d){var e=F(this);c&&(c.nb(a,this),"image"!=c.id&&"frame"!=c.id&&a.fillRect(e.left,e.top,b.width,b.height));if(d&&(d.nb(a,this),"sprite"==this.id||"label"==this.id))c=d.Tb/2,a.strokeRect(e.left+c,e.top+c,b.width-2*c,b.height-2*c)}};function Ld(){U.call(this)}w(Ld,U);Ld.prototype.update=ba;function Md(a){U.call(this);var b=Fa(arguments);u(a)&&(b=a);this.i=2<b.length?[b.shift(),new Md(b)]:b;this.A(this.i[0].m+this.i[1].m)}w(Md,U);Md.prototype.fb=function(a){U.prototype.fb.call(this,a);this.A(this.i[0].m+this.i[1].m);this.Pa=this.i[0].m/this.m;this.ha=-1};Md.prototype.stop=function(){this.ha&&-1!=this.ha&&this.i[this.ha].stop(this.Da);U.prototype.stop.apply(this,arguments)};
Md.prototype.qa=function(a,b){if(0==this.J)return a;for(var c=b.length;0<=--c;)kd(this,b[c]);var d=c=0;a>=this.Pa?(c=1,d=1==this.Pa?1:(a-this.Pa)/(1-this.Pa)):(c=0,d=0!=this.Pa?a/this.Pa:1);-1==this.ha&&1==c&&(this.i[0].J=1,this.i[0].qa(1,b),this.i[0].stop());this.ha!=c&&(-1!=this.ha&&(this.i[this.ha].qa(1,b),this.i[this.ha].stop()),this.i[c].J=1);this.i[c].qa(d,b);this.ha=c;return a};function Nd(a){U.call(this);var b=Fa(arguments);u(a)&&(b=a);2<b.length?(this.Ja=b.shift(),this.Sa=new Nd(b)):(this.Ja=b[0],this.Sa=b[1]);var b=this.Ja.m,c=this.Sa.m;this.A(Math.max(b,c));var d=new Ld;b>c?this.Sa=new Md(this.Sa,d.A(b-c)):b<c&&(this.Ja=new Md(this.Ja,d.A(c-b)))}w(Nd,U);Nd.prototype.fb=function(a){U.prototype.fb.call(this,a);this.Ja.J=1;this.Sa.J=1};Nd.prototype.qa=function(a,b){if(0!=this.J){for(var c=b.length;0<=--c;)kd(this,b[c]);this.Ja.qa(a,b);this.Sa.qa(a,b);return a}};C.Ub={};H.Ub={};H.Ub.z=function(a){var b=this.f();H.B.z.call(this,a);zc(a,0.5*b.width,0.5*b.height)};C.Ub.z=function(a){this.f();var b=this.ca,c=F(this),d=0.5*(c.right-c.left),c=0.5*(c.bottom-c.top);a.save();a.save();a.scale(d,c);a.translate(1-2*b.x,1-2*b.y);a.beginPath();a.arc(0,0,1,0,2*Math.PI,n);a.closePath();a.restore();a.clip();C.B.z.call(this,a);this.P&&(a.lineWidth*=2,a.stroke());a.restore()};var Od,Pd;function Qd(){V.call(this);this.Yb=new V;this.appendChild(this.Yb);this.Mb=n;this.index=-1;this.tc=l}w(Qd,V);var Rd="#F00 #F90 #0C0 #0CC #00C #96F".split(" ");Qd.prototype.select=function(){if(!this.Mb){var a=this.f().d();this.bd=(new V).c(a).o("assets/selection.png");this.appendChild(this.bd,0);this.Mb=l}};function Sd(a){a.Mb&&(a.removeChild(a.bd),a.Mb=n)}Qd.prototype.update=function(){var a=this.f();this.Yb.c(0.75*a.width,0.75*a.height);Q.prototype.update.call(this)};function Td(a){U.call(this);this.C=a}w(Td,U);Td.prototype.scope="fade";Td.prototype.jb=function(a){var b=a.C;jd(this)&&(a.pa[Gc]=[this.C,this.m,this.xb,0],R(a,Hc));return{ce:b,w:this.C-b}};Td.prototype.update=function(a,b){if(0!=this.J){var c=kd(this,b);cd(b,c.ce+c.w*a)}};Td.prototype.ka=function(a){jd(this)&&(a.ka(Gc),R(a,Hc))};function Ud(a,b){U.call(this);this.u=1==arguments.length&&da(a)?new I(a,a):2==arguments.length?new I(arguments[0],arguments[1]):a}w(Ud,U);Ud.prototype.scope="scale";Ud.prototype.jb=function(a){var b=a.u,c=new I(this.u.x-b.x,this.u.y-b.y);jd(this)&&(a.pa[E]=[new I(b.x+c.x,b.y+c.y),this.m,this.xb,0],R(a,2));return{sd:b,w:c}};Ud.prototype.update=function(a,b){if(0!=this.J){var c=kd(this,b);b.Oa(c.sd.x+c.w.x*a,c.sd.y+c.w.y*a)}};Ud.prototype.ka=function(a){jd(this)&&(a.ka(E),R(a,2))};function Vd(a,b){U.call(this);this.$a=2==arguments.length?new y(arguments[0],arguments[1]):a}w(Vd,U);q=Vd.prototype;q.scope="move";q.jb=function(a){jd(this)&&(a.pa[G]=[new y(a.h.x+this.$a.x,a.h.y+this.$a.y),this.m,this.xb,0],R(a,Kc));return{ud:a.h}};q.Ya=function(){if(this.Pb){var a=this.$a,b=new y(0,0),c=a.x-b.x,a=a.y-b.y;this.A(this.Pb*Math.sqrt(c*c+a*a)/100);this.rd=1}};q.update=function(a,b){if(0!=this.J){var c=kd(this,b);b.b(c.ud.x+this.$a.x*a,c.ud.y+this.$a.y*a)}};
q.ka=function(a){jd(this)&&(a.ka(G),R(a,Kc))};function Wd(){this.mb={};this.Sd=0}
Wd.prototype.play=function(a){var b,c,d=0,e;for(e in this.mb){var f=this.mb[e];b=new Vd(f[0][1]);b.Pb=0.3;b.Ya();b=md(b);d<b.m&&(c=b,d=b.m);if(!a&&15<f.length){for(var g=Rc(new S,C),j=f[0][0].getParent().getParent(),k=0;k<f.length;k++){var p=f[k][0];p.getParent().removeChild(p);g.appendChild(f[k][0])}j.appendChild(g);P(b,"stop",function(){this.getParent().removeChild(this);for(var a=this.h,b=this.e.length-1;0<=b;){var c=this.e[b];this.removeChild(c);Rc(c,H);j.Db[c.K].appendChild(c);c.b(new y(a.x+
c.h.x,a.y+c.h.y));b--}},n,g);gd(g,b)}else{for(k=0;k<f.length;k++)Da(b.Da,f[k][0]);b.play()}}return c};function Xd(a,b,c){V.call(this);this.dc=c;this.Wa=690;this.rows=a;this.cols=b;this.L=Array(b);this.c(this.Wa,this.Wa).O(0,0);this.jd=(new V).c(this.Wa,this.Wa).o(100,0,0,0.1).O(0,0);this.appendChild(this.jd);Qc(this,this.jd);this.R=Math.round(this.Wa/b);this.Db=[];for(a=0;a<b;a++)this.Db[a]=new S,this.appendChild(this.Db[a]);Yd(this);T.Oc(this.oc,this,700);P(this,["mousedown","touchstart"],this.sc)}w(Xd,V);
function Yd(a){for(var b=0;b<a.cols;b++){a.L[b]||(a.L[b]=[]);for(var c=0,d=a.L[b].length;d<a.rows;d++){c++;var e;e=Math.floor(Math.random()*Rd.length);var f=new Qd;f.index=e;f.Yb.o("assets/ball_"+e+".png");e=f;e.t=d;e.K=b;e.b((b+0.5)*a.R,(-c+0.5)*a.R);e.c(a.R,a.R);a.L[b].push(e);a.Db[b].appendChild(e)}}}
Xd.prototype.oc=function(a){var b,c,d=new Wd;this.gb=1;for(var e=0;e<this.cols;e++)for(var f=0;f<this.rows;f++)if(b=this.L[e][f],b.t=f,b.K=e,c=new y((e+0.5)*this.R,this.f().height-(f+0.5)*this.R),!(c==b.h||(!c||!b.h?0:c.x==b.h.x&&c.y==b.h.y))){var g=d,j=b;b=new y(c.x-b.h.x,c.y-b.h.y);c=b.x+"_"+b.y;t(g.mb[c])||(g.mb[c]=[]);g.mb[c].push([j,b]);g.Sd++}(a=d.play(a))?P(a,"stop",function(){this.gb=0;var a=Zd(this);if(a.length){var b=this.dc;T.rb(b.Ob,b);gd(b.ub,new Td(0));delete b.hint;for(var b=md(new Nd(new Ud(0),
(new Td(0)).A(0.8))),c={},d=0,e=0;e<a.length;){var f=a[e++],g=fa(f)?"o"+ga(f):(typeof f).charAt(0)+f;Object.prototype.hasOwnProperty.call(c,g)||(c[g]=l,a[d++]=f)}a.length=d;c=[];for(d=0;d<a.length;d++)Da(b.Da,a[d]),Ea(this.L[a[d].K],a[d]),Da(c,a[d].index);d=this.dc;c=a.length*c.length;d.Ib+=c;d.fa+=c;d.fa>d.Fb&&(d.fa=d.Fb);d.Rb&&$d(d.Rb,d.fa/d.Fb);P(b,"stop",function(){Aa(a,function(a){a.g.removeChild(a)},this);this.gb=0;this.oc()},n,this);Yd(this);this.gb=1;b.play()}else{for(d=c=0;d<this.cols;d++)for(e=
this.rows-1;0<=e;e--){f=this.L[d][e];for(g=0;2>g;g++){var j=d,Ya=e;0==g?j++:Ya--;j>=this.cols||0>Ya||(j=this.L[j][Ya],ae(this,f,j),Ya=Zd(this).length,Ya>c&&(c=Ya,b=f),ae(this,f,j))}}this.hint=b;b=this.dc;c=this.hint;b.hint=c;t(c)?T.Oc(b.Ob,b,3500):be(b)}},n,this):this.gb=0;return a||n};
function Zd(a){var b,c,d,e,f=[];for(b=0;b<a.rows;b++){i=-1;e=[];for(c=0;c<a.cols;c++){d=a.L[c][b];d.index==i&&e.push(d);if(d.index!=i||c==a.cols-1)3<=e.length&&ma(Ga,f,h,0).apply(m,e),e=[d];i=d.index}}for(c=0;c<a.cols;c++){i=-1;e=[];for(b=0;b<a.rows;b++){d=a.L[c][b];d.index==i&&e.push(d);if(d.index!=i||b==a.rows-1)3<=e.length&&ma(Ga,f,h,0).apply(m,e),e=[d];i=d.index}}return f}
Xd.prototype.sc=function(a){if(!this.gb){var b=a.position,c=Math.floor(b.x/this.R),b=this.rows-Math.ceil(b.y/this.R);("mousedown"==a.type||"touchstart"==a.type)&&a.Ra(["mouseup","touchend"],Xd.prototype.sc);a=this.L[c][b];a!=this.$&&(a.select(),this.$?this.$.t==a.t&&1==Math.abs(this.$.K-a.K)||this.$.K==a.K&&1==Math.abs(this.$.t-a.t)?(ce(this,this.$,a),delete this.$):(Sd(this.$),this.$=a):this.$=a)}};
function ce(a,b,c,d){ae(a,b,c);var e=a.oc(l);!d&&!Zd(a).length?P(e,"stop",function(){ce(this,b,c,l)},n,a):(Sd(b),Sd(c));delete a.$}function ae(a,b,c){var d=b.K,e=b.t;b.K=c.K;b.t=c.t;c.K=d;c.t=e;a.L[b.K][b.t]=b;a.L[c.K][c.t]=c}Xd.prototype.Ob=function(){this.hint&&gd(this.hint,new Md((new Ud(1.3)).A(0.4),(new Ud(1)).A(0.4)))};C.Va={};H.Va={};function W(){V.call(this);de(this,5)}w(W,V);W.prototype.id="roundedrect";W.prototype.Ba=[La(H.B,H.Va),La(C.B,C.Va)];function de(a,b){a.ve=n;a.uc=b;return a}H.Va.z=function(a){this.f();H.B.z.call(this,a);zc(a,[this.uc*this.Ka,this.uc*this.Ka])};
C.Va.z=function(a){this.f();var b=F(this),c=this.uc,d=b.left,e=b.top,f=b.right-b.left,b=b.bottom-b.top;a.save();a.beginPath();a.moveTo(d+c,e);a.lineTo(d+f-c,e);a.quadraticCurveTo(d+f,e,d+f,e+c);a.lineTo(d+f,e+b-c);a.quadraticCurveTo(d+f,e+b,d+f-c,e+b);a.lineTo(d+c,e+b);a.quadraticCurveTo(d,e+b,d,e+b-c);a.lineTo(d,e+c);a.quadraticCurveTo(d,e,d+c,e);a.closePath();a.clip();C.B.z.call(this,a);this.P&&(a.lineWidth*=2,a.stroke());a.restore()};function ee(a,b){S.call(this);this.bb="lime-button";t(a)&&(this.Q=a,this.appendChild(this.Q),this.qb=-1,fe(this,ge));t(b)&&(this.ga=b,this.appendChild(b),this.qb=-1,fe(this,ge));var c=this;P(this,["mousedown","touchstart","touchmove"],function(a){fe(c,he);a.Ra("mousemove",function(a){c.ya(a)?fe(c,he):fe(c,ge)});a.Ra("touchmove",function(a){c.ya(a)||(fe(c,ge),a.lb())});a.Ra(["mouseup","touchend"],function(a){c.ya(a)&&c.dispatchEvent({type:ie});fe(this,ge)})})}w(ee,S);var ge=0,he=1,ie="click";
function fe(a,b){if(b!=a.qb){a.qb==ge&&b==he&&a.dispatchEvent({type:"down"});a.qb==he&&b==ge&&a.dispatchEvent({type:"up"});var c=a.Q;t(a.ga)&&(he==b?c=a.ga:Zc(a.ga,l));c!=a.Q&&Zc(a.Q,l);Zc(c,n);a.qb=b}};C.Ua={};H.Ua={};function X(a){V.call(this);this.r(a);je(this,ke);Z(this,14);$(this,"#000");le(this,"center");me(this,"400");a=[0,0,0,0];t(h)&&(a[1]=a[3]=h);t(h)&&(a[2]=h);t(h)&&(a[3]=h);this.H=a;R(this,8);this.Md=n;this.fd=1.15;this.$d(m);this.o(255,255,255,0)}w(X,V);X.prototype.id="label";var ke="Arial";X.prototype.Ba=[La(H.B,H.Ua),La(C.B,C.Ua)];var ne;q=X.prototype;
q.measureText=function(){t(ne)||(ne=document.createElement("canvas").getContext("2d"));var a=oe(this)*this.xa;ne.font=this.xa+"px "+this.cc;var b=ne.measureText(this.oa),b=M?b.width:b.width+1;Ob&&(b+=1);var c=this.P?this.P.Tb:0;return new z(this.H[1]+this.H[3]+b+2*c,this.H[0]+this.H[2]+a+2*c)};q.f=function(){var a=Q.prototype.f.call(this);return!a||!a.width&&!a.height?this.measureText():a};q.r=function(a){this.oa=a+"";R(this,4);delete this.Bc;return this};function me(a,b){a.$c=b;R(a,8);return a}
function je(a,b){a.cc=b;R(a,8);return a}function Z(a,b){a.xa=b;R(a,8);return a}function $(a,b){a.Zc=b;R(a,8);return a}function oe(a){var b=Math.abs(a.V.y)+2*a.aa;return a.Md?(a.fd+b)/a.xa:a.fd+b/a.xa}function le(a,b){a.Fc=b;R(a,8);return a}q.$d=function(a,b,c,d){1==arguments.length&&a===m?(this.pb="#ccc",this.aa=0,this.Nb(0,0)):2==arguments.length?(this.pb=a,this.aa=b,this.Nb(new I(0,0))):3==arguments.length?(this.pb=a,this.aa=b,this.Nb(c)):(this.pb=a,this.aa=b,this.Nb(c,d));R(this,8)};
q.Nb=function(a,b){this.V=2==arguments.length?new I(arguments[0],arguments[1]):a;R(this,8)};q.update=function(){this.p&4&&delete this.ed;Q.prototype.update.apply(this,arguments)};
H.Ua.z=function(a){H.B.z.call(this,a);var b=a.style;this.p&4&&fc(a,this.oa);this.p&8&&(b.lineHeight=oe(this),b.padding=Ca(this.H,function(a){return a*ad(this)},this).join("px ")+"px",b.color=this.Zc,b.fontFamily=this.cc,b.fontSize=this.xa*ad(this)+"px",b.fontWeight=this.$c,b.textAlign=this.Fc,b.textShadow=this.aa||this.V.x||this.V.y?this.pb+" "+this.V.x+"px "+this.V.y+"px "+this.aa+"px":"")};
C.Ua.z=function(a){C.B.z.call(this,a);var b=F(this),c=-b.left-this.H[3]+b.right-this.H[1]+Math.abs(this.V.x)+Math.abs(2*this.aa),d=0;if(!this.Bc){var d=[],e=this.oa.length,f=this.oa.match(L?/[\s\.]+/g:/[\s-\.]+/g),g=0;if(f)for(var j=0;j<f.length;j++){var k=f[j],k=this.oa.indexOf(k,g)+k.length;d.push(this.oa.substring(g,k));g=k}g!=e&&d.push(this.oa.substring(g,e));this.Bc=d;d=1}f=this.P?this.P.Tb:0;a.save();e=this.Fc;"left"==e?a.translate(b.left+this.H[3]+f,b.top+this.H[0]+f):"right"==e?a.translate(b.right-
this.H[1]-f,b.top+this.H[0]+f):"center"==e&&a.translate(0.5*(b.left+this.H[3]+b.right-this.H[1]),b.top+this.H[0]+f);b=oe(this);a.fillStyle=this.Zc;a.font=this.$c+" "+this.xa+"px/"+b+" "+this.cc;a.textAlign=e;a.textBaseline="top";if(this.aa||this.V.x||this.V.y)a.shadowColor=this.pb,a.shadowOffsetX=this.V.x,a.shadowOffsetY=this.V.y,a.shadowBlur=this.aa;if(d||c!=this.ed){d=[];e="";f=this.Bc;for(j=0;j<f.length;j++)""==e?e=f[j]:(g=a.measureText(sa(e+f[j])),g.width>c?(d.push(sa(e)),e=f[j]):e+=f[j]);d.push(e);
this.kc=d;this.ed=c}if(this.kc){c=b*this.xa;b=(t(this.aa)?Math.abs(this.aa):0)+(t(this.V)?Math.abs(this.V.y)/2:0);c=M?Math.floor(c):Math.round(c);for(d=0;d<this.kc.length;d++)a.fillText(this.kc[d],0,c*d+b-0.5)}a.restore()};function pe(){this.Za=[];qe(this)}w(pe,Cd);q=pe.prototype;q.id="lineargradient";q.gc=function(a){(cb||J)&&Rc(a,C)};function qe(a){a.v=[0,0,0,1];return a}q.addColorStop=function(a,b){var c=Fa(arguments);c.shift();this.Za.push([a,Dd(c)]);return this};q.Ed=function(a){return M?"color-stop("+a[0]+", "+a[1].ea+")":a[1].ea+" "+100*a[0]*this.Xd+"%"};
q.ob=function(a,b){var c,d=F(b);c=d.right-d.left;var e=d.bottom-d.top;if(!M){var f=(this.v[2]-this.v[0])*c,g=(this.v[1]-this.v[3])*e,j=d.left+c*this.v[0],k=d.top+e*this.v[1],p=Math.atan2(g,f),s=-g/f;Infinity==s&&(s=Math.pow(10,10));d=0<p&&p<Math.PI/2?[d.right,d.top]:0<p?[d.left,d.top]:p>-Math.PI/2?[d.right,d.bottom]:[d.left,d.bottom];d=(d[1]+1/s*d[0]-k+s*j)/(s+1/s);s=s*d+k-j*s;d-=j;s-=k;this.Xd=Math.sqrt((f*f+g*g)/(d*d+s*s))}f=Ca(this.Za,this.Ed,this);c=M?"-webkit-gradient(linear,"+100*this.v[0]+
"% "+100*this.v[1]+"%,"+100*this.v[2]+"% "+100*this.v[3]+"%,"+f.join(",")+")":"linear-gradient("+100*this.v[0]+"% "+100*this.v[1]+"% "+Math.atan2((this.v[1]-this.v[3])*e,(this.v[2]-this.v[0])*c)+"rad,"+f.join(",")+")";L&&(c="-moz-"+c);a.style.background=c};q.nb=function(a,b){for(var c=this.v,d=F(b),e=d.right-d.left,f=d.bottom-d.top,c=a.createLinearGradient(d.left+e*c[0],d.top+f*c[1],d.left+e*c[2],d.top+f*c[3]),d=0;d<this.Za.length;d++)c.addColorStop(this.Za[d][0],this.Za[d][1].ea);a.fillStyle=c};function re(a){ee.call(this,this.nc(a),this.nc(a));this.borderWidth=2;this.r(a);this.Na("#62be00")}w(re,ee);q=re.prototype;q.nc=function(a){var b=new W;b.Z=new W;b.label=Z($(je(le(new X(a),"center"),'"Trebuchet MS"'),"#010101"),17);b.appendChild(b.Z);b.Z.appendChild(b.label);return b};
q.Na=function(a){a=Dd(a);Aa([this.Q,this.ga],function(b){var c;b==this.ga?(c=a.d(),c=Hd(c,1,-0.2)):c=a;b.o(c);var d=qe(new pe);d.addColorStop(0,Gd(c.d(),0.13));d.addColorStop(0.5,Gd(c.d(),0.05));d.addColorStop(0.52,c);d.addColorStop(1,c);b.Z.o(d)},this);return this};q.r=function(a){this.Q.label.r(a);this.ga.label.r(a);return this};
q.c=function(a,b){if(this.Q){this.Q.c.apply(this.Q,arguments);var c=this.Q.f();Aa([this.Q,this.ga],function(a){a.c(c);var b=c.d();b.width-=this.borderWidth;b.height-=this.borderWidth;a.Z.c(b)},this)}return this};q.f=function(){return this.Q.f()};function se(a){re.call(this,a);this.borderWidth=4;this.Na("#000")}w(se,re);se.prototype.nc=function(){var a=de((new W).o("#fff"),10);a.Z=de(new W,10);a.label=Z($(je(le(new X,"center"),'"Trebuchet MS"'),"#eef"),28);a.appendChild(a.Z);a.Z.appendChild(a.label);return a};se.prototype.Na=function(a){a=Dd(a);Aa([this.Q,this.ga],function(b){var c=b==this.ga?Gd(a.d(),0.1):a,d=Gd(c.d(),0.3),e=qe(new pe);e.addColorStop(0,d);e.addColorStop(0.45,c);e.addColorStop(0.55,c);e.addColorStop(1,d);b.Z.o(e)},this);return this};function D(){Q.call(this);this.O(0,0);this.bb="lime-scene";Tc(this)}w(D,Q);D.prototype.zb=function(){return this};D.prototype.Gb=function(){return F(this)};function te(){D.call(this);var a=(new se("Back")).b(360,870).c(300,90);P(a,"click",function(){ue()});this.appendChild(a);a=de(new W,30).o("#fff").c(700,560).b(360,420);this.appendChild(a);var b=(new V).o("assets/helper1.jpg").b(-160,30).Oa(0.9);a.appendChild(b);b=(new V).o("assets/helper2.jpg").b(160,30).Oa(0.9);a.appendChild(b);b=le(Z(new X,18).c(280,100).b(-160,-170),"left");b.r("Switch two neighbour balls to match up three, four or five same colored balls in a row.  Doing so will clear them and give you points.");
a.appendChild(b);b=le(Z(new X,18).c(280,100).b(160,-170),"left");b.r("You get extra points for making more than one match at once.");a.appendChild(b);b=le(Z(new X,18).c(550,40).b(0,220),"center");b.r("When there are no possible moves on the screen, the game ends.");a.appendChild(b)}w(te,D);function ve(a,b){U.call(this);this.s=2==arguments.length?new z(arguments[0],arguments[1]):a}w(ve,U);ve.prototype.scope="size";ve.prototype.jb=function(a){a=a.f();return{td:a,w:new I(this.s.width-a.width,this.s.height-a.height)}};ve.prototype.update=function(a,b){if(0!=this.J){var c=kd(this,b);b.c(c.td.width+c.w.x*a,c.td.height+c.w.y*a)}};function we(){W.call(this);var a=320,b=50;de(this.c(a,b),20).O(0,0.5);this.o((new pe).addColorStop(0,21,55,98,0.6).addColorStop(1,30,87,151,0.4));a-=16;b=de(new W,12).c(a,b-16).o("#F90").O(0,0.5).b(8,0);this.appendChild(b);b.o((new pe).addColorStop(0,"#afcdef").addColorStop(0.49,"#55a1fc").addColorStop(0.5,"#3690f4").addColorStop(1,"#8dc9ff"));this.width=a;this.Z=b}w(we,W);function $d(a,b){a.re=b;gd(a.Z,(new ve(a.width*b,a.Z.f().height)).A(0.4))};function xe(a){D.call(this);this.Ib=0;var b=new S;this.appendChild(b);this.S=(new Xd(a,a,this)).b(25,174);/Chrome\/9\.0\.597/.test($a())&&Rc(this.S,C);for(var a=de((new W).c(690,690).O(0,0).b(17,166),30),c=0;c<this.S.cols;c++)for(var d=0;d<this.S.rows;d++){var e=(new V).o("assets/shadow.png").O(0,0).c(0.94*this.S.R,0.94*this.S.R).b(11+c*this.S.R,11+d*this.S.R);e.tc=l;a.appendChild(e)}b.appendChild(a);b.appendChild(this.S);a=(new V).c(670,2).o("#295081").b(360,148);b.appendChild(a);a=(new V).c(670,
2).o("#295081").b(360,885);b.appendChild(a);a=me(Z($(je(new X,"Trebuchet MS"),"#4f96ed"),24).b(30,22).r("Score:").O(0,0),700);b.appendChild(a);this.yc=me(Z($(new X,"#fff"),92).r(0).b(30,40).O(0,0),700);b.appendChild(this.yc);this.Mc=(new se("Menu")).c(140,70).b(100,945);P(this.Mc,"click",function(){ue()});this.appendChild(this.Mc);this.ub=cd((new se("Hint")).c(140,70).b(640,945),0);P(this.ub,"click",function(){this.hint&&this.S.Ob()},n,this);this.appendChild(this.ub);this.fa=this.Fb=30;Od==ye&&(this.ee=
le(me(Z($(je(new X,"Trebuchet MS"),"#4f96ed"),24).b(680,22).r("Time left:").O(1,0),700).c(300,30),"right"),b.appendChild(this.ee),this.Rb=(new we).b(356,90),b.appendChild(this.Rb),T.xc(this.Uc,this,1E3));T.xc(this.wd,this,100);ze(this)}w(xe,D);xe.prototype.Uc=function(){this.fa--;1>this.fa&&be(this);$d(this.Rb,this.fa/this.Fb)};xe.prototype.wd=function(){var a=parseInt(this.yc.oa,10);a<this.Ib&&this.yc.r(a+1)};xe.prototype.Ob=function(){gd(this.ub,new Td(1))};
function be(a){Hb(a.S,["mousedown","touchstart"],a.S.sc);T.rb(a.wd,a);T.rb(a.Uc,a);var b=de((new W).o(0,0,0,0.7).c(500,480).b(360,260).O(0.5,0),20);a.appendChild(b);var c=Z($((new X).r(1>a.fa?"No more time!":"No more moves!"),"#ddd"),40).b(0,70);b.appendChild(c);c=$(Z((new X).r("Your score:"),24),"#ccc").b(0,145);b.appendChild(c);c=me($(Z((new X).r(a.Ib),150),"#fff").b(0,240),700);b.appendChild(c);c=(new se).r("TRY AGAIN").c(200,90).b(-110,400);b.appendChild(c);P(c,ie,function(){Ae(this.S.cols)},
n,a);c=(new se).r("MAIN MENU").c(200,90).b(110,400);b.appendChild(c);P(c,ie,function(){ue()})};function Be(){D.call(this);this.a.style.cssText="background:rgba(255,255,255,.8)"}w(Be,D);function Ce(a){this.ab=a;this.identifier=0}Ce.prototype.Ra=function(a,b,c){for(var a=u(a)?a:[a],d=0;d<a.length;d++)this.ab.Ra(this,a[d],b);c&&this.event.stopPropagation()};Ce.prototype.lb=function(a){var b=t(a),c=u(a)?a:[a];if(a=this.ab.na[this.identifier]){var d=this,a=Ba(a,function(a){return!t(d.Ca)||a[0]==d.Ca&&(!b||0<=za(c,a[1]))?(Hb(a[0],a[1],a[2]),n):l});a.length?this.ab.na[this.identifier]=a:delete this.ab.na[this.identifier]}};Ce.prototype.d=function(){var a=new Ce(this.ab);Ma(a,this);return a};function De(a){this.ua=a;this.N={};this.na={}}De.prototype.Kb=function(a,b){t(this.N[b])?0<=za(this.N[b],a)||(this.N[b].push(a),this.N[b].sort(Wc)):(this.N[b]=[a],P("touch"==b.substring(0,5)&&a!=this.ua?document:"key"==b.substring(0,3)?window:this.ua.a.parentNode,b,this,n,this))};De.prototype.lb=function(a,b){t(this.N[b])&&(Ea(this.N[b],a),this.N[b].length||(Hb(this.ua.a.parentNode,b,this,n,this),delete this.N[b]))};function fd(a,b){for(var c in a.N){var d=a.N[c];0<=za(d,b)&&d.sort(Wc)}}
De.prototype.Ra=function(a,b,c){var d=a.identifier;t(this.na[d])||(this.na[d]=[]);this.na[d].push([a.Ca,b,c]);P(a.Ca,b,ba)};
De.prototype.handleEvent=function(a){if(t(this.N[a.type])){for(var b=this.N[a.type].slice(),c=n,d=0,e=0;!e;){var f=new Ce(this);f.type=a.type;f.event=a;if("touch"==a.type.substring(0,5)){var g=a.wa.changedTouches[d];f.Ma=new y(g.pageX,g.pageY);f.identifier=g.identifier;d++;d>=a.wa.changedTouches.length&&(e=1)}else f.Ma=new y(a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a.clientY+document.body.scrollTop+document.documentElement.scrollTop),e=1;if(t(this.na[f.identifier])){for(var g=
this.na[f.identifier],j=0;j<g.length;j++)if(g[j][1]==a.type||u(g[j][1])&&0<=za(g[j][1],a.type)){var k=g[j][0];f.Ca=k;f.position=k.ia(f.Ma);g[j][2].call(k,f);c=l}if("touchend"==a.type||"touchcancel"==a.type||"mouseup"==a.type||"keyup"==a.type)delete f.Ca,f.lb()}else for(j=0;j<b.length;j++)if(k=b[j],!((this.ua.k.length?this.ua.k[this.ua.k.length-1]:m)!=k.zb()&&k!=this.ua)&&!k.Ab&&k.q)if(f.Ca=k,k.ya(f)||"key"==a.type.substring(0,3))if(f.Ca=k,k.dispatchEvent(f),c=l,f.event.ma)break}c&&a.preventDefault()}};function Ee(a){this.Ta=a||window;this.Nd=P(this.Ta,"resize",this.Id,n,this);this.s=$b(this.Ta||window);if(M&&gb||cb&&this.Ta.self!=this.Ta.top)this.ie=window.setInterval(la(this.Pc,this),Fe)}w(Ee,Mb);var Fe=500;q=Ee.prototype;q.Nd=m;q.Ta=m;q.s=m;q.ie=m;q.f=function(){return this.s?this.s.d():m};q.Id=function(){this.Pc()};q.Pc=function(){var a=$b(this.Ta||window);if(!(a==this.s||(!a||!this.s?0:a.width==this.s.width&&a.height==this.s.height)))this.s=a,this.dispatchEvent("resize")};function Ge(a,b){this.m=1;this.Hb=a;this.eb=b;this.Dd=n}w(Ge,Mb);Ge.prototype.A=function(a){this.m=a;return this};Ge.prototype.start=function(){this.eb.b(new y(0,0));Zc(this.eb,n);this.finish()};Ge.prototype.finish=function(){this.dispatchEvent(new zb("end"));this.Dd=l};function He(a,b,c){Q.call(this);this.q=l;this.O(0,0);this.k=[];this.Sc=[];this.bb="lime-director";Tc(this);a.appendChild(this.a);if(M&&db){this.Rc=document.createElement("div");Ub(this.Rc,"lime-cover-below");var d=this.a;d.parentNode&&d.parentNode.insertBefore(this.Rc,d);this.Qc=document.createElement("div");Ub(this.Qc,"lime-cover-above");d=this.a;d.parentNode&&d.parentNode.insertBefore(this.Qc,d.nextSibling)}"absolute"!=a.style.position&&(a.style.position="relative");a.style.overflow="hidden";if(a==
document.body){pc("html,body{margin:0;padding:0;height:100%;}");d=document.createElement("meta");d.name="viewport";var e="width=device-width,initial-scale=1.0,minimum-scale=1,maximum-scale=1.0,user-scalable=no";/android/i.test(navigator.userAgent)&&(e+=",target-densityDpi=device-dpi");d.content=e;document.getElementsByTagName("head").item(0).appendChild(d);if(db&&!r.navigator.be){var f=this;setTimeout(function(){window.scrollTo(0,0);f.Cb()},100)}}var g,a=nc(a);this.c(new z(g=b||a.width||400,c||a.height*
g/a.width||400));this.Wc&&dc(this.Gd);this.Ld=this.Wc=n;T.Ad(this);if(this.Ld){var j=this.qc=new (this.qe||Be),k;j.c(this.f().d());t(h)&&this.k.length&&(k=this.k[this.k.length-1],k=new h(k,j),t(h)&&k.A(h),j.a.style.display="none");this.k.push(j);this.a.appendChild(j.a);j.g=this;dd(j);k&&k.start()}else if(this.qc){var p=this.k.length?this.k[this.k.length-1]:m;p!==m&&(k=function(){ed(p);p.g=m;dc(p.a);this.k.pop();p=m},t(h)&&1<this.k.length?(j=new h(p,this.k[this.k.length-2]),t(h)&&j.A(h),Gb(j,"end",
k,n,this)):k.call(this),j&&j.start());delete this.qc}k=new Ee;P(k,"resize",this.Cb,n,this);P(r,"orientationchange",this.Cb,n,this);T.wc(this.Qa,this);this.Ha=new De(this);P(this,["touchmove","touchstart"],function(a){a.event.preventDefault()},n,this);P(this,["mouseup","touchend","mouseout","touchcancel"],function(){},n);this.Cb()}w(He,Q);q=He.prototype;q.M=function(){return this};q.zb=function(){return m};
q.Qa=function(a){this.Wc&&(this.ad++,this.sb+=a,100<this.sb&&(this.Fd=1E3*this.ad/this.sb,fc(this.Gd,this.Fd.toFixed(2)),this.sb=this.ad=0));ra()};
function Ie(a){var b=Pd,c=Je;a.c(b.f().d());var c=c||Ge,d=m;b.k.length&&(d=b.k[b.k.length-1]);for(var e=[],f=b.k.length;0<=--f;)ed(b.k[f]),e.push(b.k[f].a),b.k[f].g=m;b.k.length=0;b.k.push(a);a.a.style.display="none";b.a.appendChild(a.a);a.g=b;dd(a);a=new c(d,a);Gb(a,"end",function(){for(var a=e.length;0<=--a;)dc(e[a]);e.length=0},n,b);t(h)&&a.A(h);a.start()}q.Ea=function(){this.p&=-65};q.ia=function(a){a=a.d();a.x-=this.wb.x+this.h.x;a.y-=this.wb.y+this.h.y;a.x/=this.u.x;a.y/=this.u.y;return a};
q.ib=function(a){a=a.d();a.x*=this.u.x;a.y*=this.u.y;a.x+=this.wb.x+this.h.x;a.y+=this.wb.y+this.h.y;return a};q.update=function(){Q.prototype.update.call(this);for(var a=this.Sc.length;0<=--a;)this.Sc[a].update()};
q.Cb=function(){var a=nc(this.a.parentNode);this.a.parentNode==document.body&&(window.scrollTo(0,0),da(window.innerHeight)&&(a.height=window.innerHeight));var b;b=this.f().d();b=b.scale(b.width/b.height>a.width/a.height?a.width/b.width:a.height/b.height);var c=b.width/this.f().width;this.Oa(c);a.width/a.height<b.width/b.height?this.b(0,(a.height-b.height)/2):this.b((a.width-b.width)/2,0);var c=this.a.parentNode,d,e=Yb(c),f=ic(c,"position"),g=L&&e.getBoxObjectFor&&!c.getBoundingClientRect&&"absolute"==
f&&(d=e.getBoxObjectFor(c))&&(0>d.screenX||0>d.screenY);b=new y(0,0);var j;d=e?Yb(e):document;if(j=J)if(j=!qb(9))j="CSS1Compat"!=Wb(d).va.compatMode;j=j?d.body:d.documentElement;if(c!=j)if(c.getBoundingClientRect)d=jc(c),e=Wb(e).va,c=!M&&"CSS1Compat"==e.compatMode?e.documentElement:e.body,e=e.parentWindow||e.defaultView,c=new y(e.pageXOffset||c.scrollLeft,e.pageYOffset||c.scrollTop),b.x=d.left+c.x,b.y=d.top+c.y;else if(e.getBoxObjectFor&&!g)d=e.getBoxObjectFor(c),c=e.getBoxObjectFor(j),b.x=d.screenX-
c.screenX,b.y=d.screenY-c.screenY;else{d=c;do{b.x+=d.offsetLeft;b.y+=d.offsetTop;d!=c&&(b.x+=d.clientLeft||0,b.y+=d.clientTop||0);if(M&&"fixed"==ic(d,"position")){b.x+=e.body.scrollLeft;b.y+=e.body.scrollTop;break}d=d.offsetParent}while(d&&d!=c);if(cb||M&&"absolute"==f)b.y-=e.body.offsetTop;for(d=c;(d=kc(d))&&d!=e.body&&d!=j;)if(b.x-=d.scrollLeft,!cb||"TR"!=d.tagName)b.y-=d.scrollTop}this.wb=b;db&&this.a.parentNode==document.body&&(this.nd&&(b=this.nd,dc(b.ownerNode||b.owningElement||b)),this.nd=
pc("html{height:"+(a.height+120)+"px;overflow:hidden;}"))};q.ya=function(a){a&&a.Ma&&(a.position=this.ia(a.Ma));return l};function Je(a,b){Ge.call(this,a,b)}w(Je,Ge);Je.prototype.start=function(){cd(this.eb,0);Zc(this.eb,n);var a=md((new Td(0)).A(this.m));P(a,"stop",function(){this.Hb&&cd(this.Hb,1)},n,this);this.Hb&&gd(this.Hb,a);a=(new Td(1)).A(this.m);gd(this.eb,a);P(a,"stop",this.finish,n,this)};var ye=1;
function ue(){var a=new D,b=(new S).b(360,0);/Chrome\/9\.0\.597/.test($a())&&Rc(b,C);var c=(new V).o("assets/main_title.png").b(0,290);c.tc=l;b.appendChild(c);var d=(new S).b(0,430);b.appendChild(d);var e=md(new Vd(-720,0)),f=Ke("Play Classic").b(0,200);P(f,"click",function(){Od=0;gd(d,e)});d.appendChild(f);f=Ke("Play Timed").b(0,320);P(f,"click",function(){Od=ye;gd(d,e)});d.appendChild(f);f=Ke("Help").b(0,440);P(f,"click",function(){var a=new te;ze(a);Ie(a)});d.appendChild(f);c=(new S).b(720,0);
d.appendChild(c);f=Z($((new X).r("Select board size:"),"#fff"),24).b(0,140);c.appendChild(f);f=Ke("6x6").b(0,200);P(f,"click",function(){Ae(6)});c.appendChild(f);f=Ke("7x7").b(0,320);P(f,"click",function(){Ae(7)});c.appendChild(f);f=Ke("8x8").b(0,440);P(f,"click",function(){Ae(8)});c.appendChild(f);a.appendChild(b);ze(a);Ie(a)}function Ke(a){return(new se(a)).c(300,90)}function Ae(a){a=new xe(a);Ie(a)}
function ze(a){var b=(new V).o("assets/lime.png"),c=Z($((new X).r("Built with"),"#fff"),24).b(290,960),b=(new ee(b)).Oa(0.3).b(410,960);P(b,"click",function(){window.location.href="http://www.limejs.com/"});a.appendChild(c);a.appendChild(b)}
function Le(){var a=Pd=new He(document.body,720,1004),b=document.createElement("meta");b.name="apple-mobile-web-app-capable";b.content="yes";document.getElementsByTagName("head").item(0).appendChild(b);b=document.createElement("meta");b.name="apple-mobile-web-app-status-bar-style";b.content="black";document.getElementsByTagName("head").item(0).appendChild(b);b=n;t(localStorage)&&(b=localStorage.getItem("_lime_visited"));/(ipod|iphone|ipad)/i.test(navigator.userAgent)&&(!window.navigator.be&&!b&&a.a.parentNode==
document.body)&&(alert("Please install this page as a web app by clicking Share + Add to home screen."),t(localStorage)&&localStorage.setItem("_lime_visited",l));ue()}var Me=["rb","start"],Ne=r;!(Me[0]in Ne)&&Ne.execScript&&Ne.execScript("var "+Me[0]);for(var Oe;Me.length&&(Oe=Me.shift());)!Me.length&&t(Le)?Ne[Oe]=Le:Ne=Ne[Oe]?Ne[Oe]:Ne[Oe]={};
